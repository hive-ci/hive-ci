<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Android Plugin</title>
  <meta name="description" content="The Android Hive Runner plugin is used for managing tests on Android mobile and tablet devices.">

  <link rel="stylesheet" href="/hive-ci/css/main.css">
  <link rel="canonical" href="http://localhost:4000/hive-ci/documentation/android_plugin.html">
  <link rel="alternate" type="application/rss+xml" title="Hive CI | CI for device testing" href="http://localhost:4000/hive-ci/feed.xml" />
</head>



  <body>
    <div class="site-wrapper page-image">

      <a id='top-of-page'></a>
      <nav class="navbar navbar-default navbar-fixed-topx">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/hive-ci/index.html">
        <img src="/hive-ci/images/hive-ci-simple.png" class="nav-logo pull-left" alt="Hive CI interface">
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
        
        <li class="">
          <a class="" href="/hive-ci/index.html">Home</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/hive-ci.html">Hive CI</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/hive-runner.html">Hive Runner</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/hivemind.html">Hive Mind</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/testmine.html">Test Mine</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/test-tools.html">Test Tools</a>
        </li>
        
        
        
        <li class="">
          <a class="" href="/hive-ci/documentation/hive-ci.html">Info</a>
        </li>
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>



      <div class="row">

      <div class="page-content">
        <div class="col-xs-12 col-sm-2">
          <ul class="nav nav-pills nav-stacked nav-compact">
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/hive-ci.html">Introduction</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/overview.html">Overview</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/setting-up-a-hive.html">Setting up a Hive</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/quick-start.html"> + Quick Start Guide</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/best-practices.html"> + Best Practices</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/examples.html"> + Examples</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/plugins-and-components.html">Plugins</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/android_plugin.html"> + Android Plugin</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/ios_plugin.html"> + iOS Plugin</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/tv_plugin.html"> + TV Plugin</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/device_api.html"> + Device API</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/software-links.html">Software Links</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/glossary.html">Glossary</a>
                
              </li>
            
              <li role="presentation">
                
                  <a href="/hive-ci/documentation/faq.html">FAQ</a>
                
              </li>
            
          </ul>
        </div>


        <div class="col-xs-12  col-sm-9">
        <h1>Android Plugin</h1>
        <p class="lead">The Android Hive Runner plugin is used for managing tests on Android mobile and tablet devices.</p>

<h2 id="contents">Contents</h2>
<ul>
  <li><a href="#prerequisites">Prerequisites</a></li>
  <li><a href="#installation">Installation</a></li>
  <li><a href="#keeping-devices-healthy">Keeping devices healthy</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>Although it is theoretically possible to run an Android Hive on any operating system that supports Android SDK, for best results it is recommended to use Linux. Specifically, Ubuntu is known to work well.</p>

<p>The Android Hive communicates with devices using <code class="highlighter-rouge">adb</code> and so <a href="https://developer.android.com/studio/index.html#downloads">Android SDK</a> need to be installed. Specifically, it must be possible to execute the following commands; <code class="highlighter-rouge">adb</code> and <code class="highlighter-rouge">aapt</code>. A recent version of Android SDK should be installed in preference to versions supplied with the Linux distribution as these can have problems working with multiple devices concurrently.</p>

<h2 id="installation">Installation</h2>

<p>The Ruby gem for the Android Hive plugin is <code class="highlighter-rouge">hive-runner-android</code> and it can be added to an existing hive by adding</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'hive-runner-android'</span>
</code></pre>
</div>

<p>to <code class="highlighter-rouge">Gemfile</code> and executing <code class="highlighter-rouge">bundle install</code> while the Hive is stopped. Before restarting the Hive the following lines should be added to the <code class="highlighter-rouge">config/settings.yml</code> file inside the <code class="highlighter-rouge">controller</code> section:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code>    <span class="s">android</span><span class="pi">:</span>
      <span class="s">name_stub</span><span class="pi">:</span> <span class="s">ANDROID_WORKER</span>
      <span class="s">port_range_size</span><span class="pi">:</span> <span class="s">10</span>
</code></pre>
</div>

<p>Alternatively, the Android plugin can be included when setting up a new Hive. Select the option to ‘Add module’ and enter <code class="highlighter-rouge">android</code> as the module name.</p>

<h2 id="keeping-devices-healthy">Keeping devices healthy</h2>

<p>The Android plugin includes some diagnostic checks for memory usage, battery temperature and uptime. In order to use these diagnostics you need to enable them in <code class="highlighter-rouge">config/settings.yml</code>. The following settings will reboot all devices every 2 hours (7200 seconds) and stop tests running if the battery temperature increases above 32C or the voltage increases above 4600mV:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code>  <span class="s">diagnostics</span><span class="pi">:</span>
    <span class="s">android</span><span class="pi">:</span>
      <span class="s">uptime</span><span class="pi">:</span>
        <span class="s">reboot_timeout</span><span class="pi">:</span> <span class="s">7200</span>
      <span class="s">battery</span><span class="pi">:</span>
        <span class="s">temperature</span><span class="pi">:</span> <span class="s">320,</span>
        <span class="s">voltage</span><span class="pi">:</span> <span class="s">4600</span>
</code></pre>
</div>

        <p><a href='#top-of-page'>Top</a></p>
        </div>
      </div>
      </div>

      <div class="row">
<div class="col-xs-span-10 footer">
  <p>BBC Hive is an Open Source BBC project licensed under MIT</p>
  <p>This site is built with Jekyll and Bootstrap, and hosted on GitHub pages.</p>
  <p><strong>&copy; 2015 BBC</strong></p>
</div>
</div>



    </div>


        <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/hive-ci/js/bootstrap.min.js">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/hive-ci/js/ie10-viewport-bug-workaround.js"></script>
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63228527-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>
</html>
